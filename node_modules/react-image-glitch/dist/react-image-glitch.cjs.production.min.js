"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,r=function(e,t){return Math.floor(Math.random()*t)+e},i=function(e){var i=e.isGlitching,u=e.top,c=e.imageHeight,a=e.image,o=t.useState(0),h=o[0],f=o[1],l=t.useState(0),s=l[0],g=l[1],d=t.useState(!1),v=d[0],m=d[1];return t.useEffect((function(){var e=r(1,1e3),t=setInterval((function(){i?(m(0!==r(0,2)),f(r(1,25)),g(r(0,360))):(f(0),g(0))}),e);return function(){return clearInterval(t)}})),n.createElement("div",{className:"Slice",style:{backgroundImage:"url("+a+")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",height:c,transform:"translateY(-"+u+"px) translateX("+(v?"-":"")+h+"px)",filter:"hue-rotate("+s+"deg)"}})};exports.GlitchedImage=function(e){var u,c,a,o=e.image,h=t.useRef(null),f=t.useState({width:0,height:0}),l=f[0],s=f[1],g=t.useState({width:0,height:0}),d=g[0],v=g[1],m=t.useState([]),p=m[0],w=m[1],b=t.useState(!1),E=b[0],S=b[1];return u=function(){var e,t;s({width:(null==(e=h.current)?void 0:e.clientWidth)||0,height:(null==(t=h.current)?void 0:t.clientHeight)||0})},c=h,a=t.useRef(null),t.useEffect((function(){if(c.current){var e=c.current;return a&&a.current&&e&&a.current.unobserve(e),a.current=new ResizeObserver(u),e&&a.current&&a.current.observe(e),function(){a&&a.current&&e&&a.current.unobserve(e)}}}),[c,u]),t.useEffect((function(){var e=new Image;e.onload=function(){v(function(e,t){var n=function(e){return e.width/e.height}(t);return{height:e.height,width:e.height*n}}(l,{height:e.height,width:e.width}))},e.src=o}),[o,l]),t.useEffect((function(){var e=r(100,600),t=r(1e3,3e3),n=setInterval((function(){S((function(e){return!e}))}),E?e:t);return function(){return clearInterval(n)}}),[E]),t.useEffect((function(){w(function(e){for(var t=[],n=0;n<e;){var i=r(3,20);t.push({height:i,offset:n}),n+=i}var u=t.slice(0,-1),c=u.slice(-1)[0];return c?[].concat(u,[{height:e-((null==c?void 0:c.offset)+(null==c?void 0:c.height)),offset:(null==c?void 0:c.offset)+(null==c?void 0:c.height)}]):[]}(l.height))}),[l.height,l.width]),n.createElement("div",{style:{height:"100%",width:"100%"},ref:h},p.map((function(e,t){return n.createElement("div",{key:t,style:{position:"relative",height:e.height,overflow:"hidden"}},n.createElement(i,{isGlitching:E,top:e.offset,imageHeight:d.height,image:o}))})))};
//# sourceMappingURL=react-image-glitch.cjs.production.min.js.map
